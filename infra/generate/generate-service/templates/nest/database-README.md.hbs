# {{serviceName}} Database

PostgreSQL database for {{serviceName}} service.

## Configuration

- **Database Name**: `{{databaseName}}`
- **Database User**: `{{databaseUser}}`
- **Password Secret**: `{{databasePasswordSecret}}`

## Init Script

The `init.sql` file contains the initial database schema and seed data. This script is executed automatically when the PostgreSQL container starts for the first time.

### Adding Tables

Edit `init.sql` to add your database schema:

```sql
CREATE TABLE IF NOT EXISTS your_table (
  id SERIAL PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  created_at TIMESTAMP NOT NULL DEFAULT NOW()
);

-- Add indexes
CREATE INDEX IF NOT EXISTS idx_your_table_name ON your_table(name);

-- Add seed data
INSERT INTO your_table (name) VALUES
  ('Example 1'),
  ('Example 2')
ON CONFLICT DO NOTHING;
```

## Deployment

The database is automatically deployed when you run:

```bash
pnpm run generate
```

This will:
1. Generate Helm values for the database
2. Create overrides for development and production environments
3. Update the CD workflow

## Local Development

For local development, use Docker:

```bash
docker run --name {{serviceName}}-postgres \
  -e POSTGRES_USER={{databaseUser}} \
  -e POSTGRES_PASSWORD=dev_password \
  -e POSTGRES_DB={{databaseName}} \
  -p 5432:5432 \
  -d postgres:16-alpine
```

## Environment Variables

Make sure to set these environment variables in your service:

- `DB_HOST` - Database host (default: localhost)
- `DB_PORT` - Database port (default: 5432)
- `DB_NAME` - Database name ({{databaseName}})
- `DB_USER` - Database user ({{databaseUser}})
- `DB_PASSWORD` - Database password (from GitHub Secrets)

