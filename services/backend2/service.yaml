# Конфигурация для backend2 сервиса
# Используется при деплое через: helm install backend2 ./infra/helmcharts/service -f services/backend2/service.yaml

image:
  repository: backend2

nameOverride: "backend2"
fullnameOverride: "backend2"

service:
  type: ClusterIP
  port: 80
  targetPort: 4000

env:
  PORT: "4000"
  NODE_ENV: "production"

replicaCount: 3

resources:
  limits:
    cpu: 1000m
    memory: 1Gi
  requests:
    cpu: 200m
    memory: 256Mi

# HPA настройки для backend2 (другие настройки)
autoscaling:
  enabled: true
  minReplicas: 3
  maxReplicas: 20
  targetCPUUtilizationPercentage: 60
  targetMemoryUtilizationPercentage: 70
  behavior:
    scaleDown:
      stabilizationWindowSeconds: 600
      policies:
      - type: Percent
        value: 25
        periodSeconds: 120
      - type: Pods
        value: 1
        periodSeconds: 120
      selectPolicy: Min
    scaleUp:
      stabilizationWindowSeconds: 0
      policies:
      - type: Percent
        value: 200
        periodSeconds: 15
      - type: Pods
        value: 4
        periodSeconds: 15
      selectPolicy: Max

