image:
  repository: auth-bff

nameOverride: "auth-bff"
fullnameOverride: "auth-bff"

replicas: 1

service:
  type: ClusterIP
  port: 80
  targetPort: 4001

metrics:
  enabled: true
  port: 9464

env:
  PORT: "4001"
  NODE_ENV: "production"
  DB_HOST: "postgresql-auth_bff"
  DB_PORT: "5432"
  DB_NAME: "auth_bff_db"
  DB_USER: "auth_bff_user"
  # DB_PASSWORD is passed from GitHub Secrets during deployment

livenessProbe:
  httpGet:
    path: /auth-bff/api/status

readinessProbe:
  httpGet:
    path: /auth-bff/api/status

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 150m
    memory: 300Mi

autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 1
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

overrides:
  production:
    canary:
      enabled: true
